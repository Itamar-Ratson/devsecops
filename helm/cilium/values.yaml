cilium:
  encryption:
    enabled: true
    type: wireguard
  kubeProxyReplacement: true
  hostPort:
    enabled: true
  socketLB:
    hostNamespaceOnly: true
  # Cilium agent resources - based on actual usage of 104m/38m per node
  resources:
    requests:
      cpu: 150m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  operator:
    replicas: 1
    prometheus:
      enabled: true
      port: 9963
      serviceMonitor:
        enabled: true
  prometheus:
    enabled: true
    port: 9962
    serviceMonitor:
      enabled: true
  gatewayAPI:
    enabled: true
    hostNetwork:
      enabled: true
    gatewayClass:
      create: "false"
  envoy:
    securityContext:
      capabilities:
        keepCapNetBindService: true
    prometheus:
      enabled: true
  hubble:
    enabled: true
    tls:
      enabled: true
      auto:
        enabled: true
        method: helm
        certValidityDuration: 1095  # 3 years
    peerService:
      enabled: true
    relay:
      enabled: true
      tls:
        server:
          enabled: true
      prometheus:
        enabled: true
        serviceMonitor:
          enabled: true
    ui:
      enabled: true
    metrics:
      enabled:
        - dns:query
        - drop
        - tcp
        - flow
        - port-distribution
        - icmp
        - policy:sourceContext=app|workload-name|pod|reserved-identity;destinationContext=app|workload-name|pod|dns|reserved-identity;labelsContext=source_namespace,destination_namespace
        - httpV2:exemplars=true;labelsContext=source_ip,source_namespace,source_workload,destination_ip,destination_namespace,destination_workload,traffic_direction
      enableOpenMetrics: true
      serviceMonitor:
        enabled: true
    # Export Hubble flows to stdout for Alloy/Loki collection
    export:
      static:
        enabled: true
        filePath: stdout
        fieldMask: []  # Export all fields for full context
        # No allowList/denyList = export all flows
